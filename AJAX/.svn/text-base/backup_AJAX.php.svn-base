<?php
$module="backup";

function cmpBackup($a , $b) {
  //if ($a['type'] == "dir") return -1;
  if ($a['date'] == $b['date'] ) {
    return 0;
  }
  else if ($a['date'] > $b['date'] ) {
    return -1;
  }
  else {
    return 1;
  }
  return $retour;
}

function searchFilesAjaxBackup($rep="") {
  foreach (searchFiles($rep,"") as $key => $file) {
      $filePath=$rep."/".$file;
      $tabStat=stat("../".$filePath);
      $tabResult[$key]['size']=$tabStat['size'];
      $tabResult[$key]['date']=$tabStat['mtime'];
      $tabResult[$key]['name']=$file;
      $pathInfo = pathinfo($file);
      
  } 
  usort($tabResult, "cmpBackup");
  return $tabResult; 
}

function placeDisk() {
  $df = disk_free_space("../"); 
  $dt = disk_total_space("../");
  $du = $dt - $df;

  $dt = ceil($dt/1024/1024);
  $du = ceil($du/1024/1024);
  return utf8Encode($du.' Mo utiliss sur les '.$dt.' Mo au total.');
}

?>