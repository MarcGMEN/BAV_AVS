<?php
$module="newsletter";
require "../Functions/".$module."_functions.php";

function return_rubPossible($idNews) {
  $news=return_news($idNews);
  $tabRubMediaAff=return_rubriqueMediaLinear();

  $tabPossible=array();
  
  // determination des possbiles restants
  foreach ($tabRubMediaAff as $val) {
    if (!isset($news['ner']) || !array_key_exists  ( $val['rub_id'],  $news['ner'] )) {
       $val['rub_libelle']=utf8Encode($val['rub_libelle']);
      $tabPossible[$val['rub_id']]=$val;
    }
  }
  return $tabPossible;
}

function return_rubSelect($idNews) {
  /*$new= return_news($idNews);
  foreach ($new['ner'] as $key => $val) {
    $new['ner'][$key]['rub_libelle']=utf8Encode($new['ner'][$key]['rub_libelle']);
  }
  
  return $new['ner'];
  */
  $news=return_news($idNews);
  $tabRubMediaAff=return_rubriqueMediaLinear();

  $tabPossible=array();
  
  // determination des possbiles restants
  foreach ($tabRubMediaAff as $val) {
    if (isset($news['ner']) && array_key_exists  ( $val['rub_id'],  $news['ner'] )) {
       $val['rub_libelle']=utf8Encode($val['rub_libelle']);
      $tabPossible[$val['rub_id']]=$val;
    }
  }
  return $tabPossible;
  
}

function ajout_rub($idNews, $idRub) {
  add_rubrique($idNews, $idRub);
}

function sup_rub($idNews, $idRub) {
    sup_rubrique($idNews, $idRub);
}

?>